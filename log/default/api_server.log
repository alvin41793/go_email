2025/05/23 18:33:50 main.go:45: 标准日志已重定向到 log/default/api_server.log
2025/05/23 18:33:58 handlers.go:84: [邮件处理] 没有需要处理的新邮件
{"level":"INFO","timestamp":"2025-05-23 18:33:58.230","file":"middleware/logger.go:32","msg":"| 200 |   41.532968ms |             ::1 | GET | /api/v1/emails/content | PostmanRuntime-ApipostRuntime/1.1.0 |"}
2025/05/23 18:39:11 main.go:45: 标准日志已重定向到 log/default/api_server.log
2025/05/23 18:39:14 handlers.go:91: [邮件处理] 开始处理 10 封邮件, 文件夹: INBOX
2025/05/23 18:39:14 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59348
2025/05/23 18:39:21 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59348_20250523_183921.eml
2025/05/23 18:39:21 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59348, 主题: MY SHIPMENTS, 发件人: rachel@usaprimeagency.com <rachel@usaprimeagency.com>
2025/05/23 18:39:21 string_utils.go:19: [字符集处理] 检测到非法UTF-8字符，进行清洗
2025/05/23 18:39:21 string_utils.go:19: [字符集处理] 检测到非法UTF-8字符，进行清洗
2025/05/23 18:39:21 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59348
2025/05/23 18:39:21 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59348, 文件名: Rachel052325.xls
2025/05/23 18:39:21 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59348, 文件名: Rachel052325.xls
2025/05/23 18:39:22 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59348, 文件名: Rachel052325.xls, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/e4c47d49e4d449d7adcc1556988f1ee8.xls
2025/05/23 18:39:22 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59347
2025/05/23 18:39:36 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59347_20250523_183936.eml
2025/05/23 18:39:37 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59347, 主题: Fw: COSCO Arrival Notice with Invoice COSU9502008500 | COSCO SHIPPING CAMELLIA - 027E, 发件人: fax . <fax@usprimeagency.com>
2025/05/23 18:39:37 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59347
2025/05/23 18:39:37 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59347, 文件名: BL9502008500.PDF
2025/05/23 18:39:37 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59347, 文件名: BL9502008500.PDF
2025/05/23 18:39:37 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59347, 文件名: BL9502008500.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/9ad466ba95bd43b4ab0a5cbdd898e94d.PDF
2025/05/23 18:39:37 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59346
2025/05/23 18:39:42 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59346_20250523_183942.eml
2025/05/23 18:39:42 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59346, 主题: Fw: Maersk Container Off-Rail Notification, 发件人: vcfax . <vcfax@usprimeagency.com>
2025/05/23 18:39:42 handlers.go:188: [邮件处理] 邮件没有附件，邮件ID: 59346
2025/05/23 18:39:42 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59345
2025/05/23 18:39:45 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59345_20250523_183945.eml
2025/05/23 18:39:45 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59345, 主题: Fw: Load on Rail Notice Ref-no: <<A1_DB5NBVLN.CNT>>, 发件人: vcfax . <vcfax@usprimeagency.com>
2025/05/23 18:39:45 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59345
2025/05/23 18:39:45 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59345, 文件名: DB5NBVLN1.PDF
2025/05/23 18:39:45 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59345, 文件名: DB5NBVLN1.PDF
2025/05/23 18:39:45 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59345, 文件名: DB5NBVLN1.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/4c9a225c130f4caa95022fc2c8d4cb65.PDF
2025/05/23 18:39:45 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59344
2025/05/23 18:39:48 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59344_20250523_183948.eml
2025/05/23 18:39:48 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59344, 主题: Fw: OOCL Arrival Notice OOLU2307552650 | COSCO SHIPPING CAMELLIA - 027E, 发件人: operator . <operator@amglbl.com>
2025/05/23 18:39:48 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59344
2025/05/23 18:39:48 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59344, 文件名: BL2307552650.PDF
2025/05/23 18:39:48 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59344, 文件名: BL2307552650.PDF
2025/05/23 18:39:48 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59344, 文件名: BL2307552650.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/6854b0362abd4536929afe48053459f2.PDF
2025/05/23 18:39:48 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59343
2025/05/23 18:39:51 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59343_20250523_183951.eml
2025/05/23 18:39:52 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59343, 主题: Fw: OOCL Arrival Notice OOLU2307553000 | COSCO SHIPPING CAMELLIA - 027E, 发件人: operator . <operator@amglbl.com>
2025/05/23 18:39:52 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59343
2025/05/23 18:39:52 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59343, 文件名: BL2307553000.PDF
2025/05/23 18:39:52 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59343, 文件名: BL2307553000.PDF
2025/05/23 18:39:52 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59343, 文件名: BL2307553000.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/3c8c41f6b8c4457eaee7bb5d74e8ec84.PDF
2025/05/23 18:39:52 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59342
2025/05/23 18:39:54 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59342_20250523_183954.eml
2025/05/23 18:39:55 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59342, 主题: Fw: OOCL Arrival Notice OOLU2157998350 | CSCL BOHAI SEA - 069E, 发件人: neway . <neway@800firms.com>
2025/05/23 18:39:55 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59342
2025/05/23 18:39:55 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59342, 文件名: BL2157998350.PDF
2025/05/23 18:39:55 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59342, 文件名: BL2157998350.PDF
2025/05/23 18:39:55 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59342, 文件名: BL2157998350.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/e49588456a134f0a896745ac3a58858e.PDF
2025/05/23 18:39:55 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59341
2025/05/23 18:39:58 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59341_20250523_183958.eml
2025/05/23 18:39:58 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59341, 主题: Fw: OOCL Arrival Notice OOLU8811119260 | COSCO SHIPPING CAMELLIA - 027E, 发件人: neway . <neway@800firms.com>
2025/05/23 18:39:58 handlers.go:137: [邮件处理] 邮件含有 1 个附件，邮件ID: 59341
2025/05/23 18:39:58 handlers.go:142: [附件处理] 开始处理附件 1/1，邮件ID: 59341, 文件名: BL8811119260.PDF
2025/05/23 18:39:58 handlers.go:158: [附件处理] 开始上传附件到OSS，邮件ID: 59341, 文件名: BL8811119260.PDF
2025/05/23 18:39:58 handlers.go:166: [附件处理] 成功上传附件到OSS，邮件ID: 59341, 文件名: BL8811119260.PDF, URL: https://geekfiles.oss-cn-shanghai.aliyuncs.com/spider/recognize/c9f2d8c7f4664a1c90a32a34d009984a.PDF
2025/05/23 18:39:58 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59340
2025/05/23 18:40:06 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59340_20250523_184006.eml
2025/05/23 18:40:06 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59340, 主题: Fw: 2157998350 VCS-HCK-069 E amend request, 发件人: neway . <neway@800firms.com>
2025/05/23 18:40:06 handlers.go:188: [邮件处理] 邮件没有附件，邮件ID: 59340
2025/05/23 18:40:06 handlers.go:106: [邮件处理] 正在获取邮件内容，ID: 59339
2025/05/23 18:40:08 mailcontent.go:273: 已保存原始邮件内容到文件: email_raw_content/email_59339_20250523_184008.eml
2025/05/23 18:40:08 handlers.go:117: [邮件处理] 成功获取邮件内容，邮件ID: 59339, 主题: Fw: IQAX eBL – eBL# OOLU2158550180 Transferred to you (DO NOT REPLY), 发件人: neway . <neway@800firms.com>
2025/05/23 18:40:08 handlers.go:188: [邮件处理] 邮件没有附件，邮件ID: 59339
2025/05/23 18:40:08 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59348, 主题: MY SHIPMENTS
2025/05/23 18:40:08 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59348, 主题=MY SHIPMENTS, 发件人=rachel@usaprimeagency.com <rachel@usaprimeagency.com>
2025/05/23 18:40:08 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59348
2025/05/23 18:40:08 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59348
2025/05/23 18:40:08 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59348
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59347, 主题: Fw: COSCO Arrival Notice with Invoice COSU9502008500 | COSCO SHIPPING CAMELLIA - 027E
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59347, 主题=Fw: COSCO Arrival Notice with Invoice COSU9502008500 | COSCO SHIPPING CAMELLIA - 027E, 发件人=fax . <fax@usprimeagency.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59347
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59347
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59347
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59346, 主题: Fw: Maersk Container Off-Rail Notification
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59346, 主题=Fw: Maersk Container Off-Rail Notification, 发件人=vcfax . <vcfax@usprimeagency.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59346
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59346
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59345, 主题: Fw: Load on Rail Notice Ref-no: <<A1_DB5NBVLN.CNT>>
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59345, 主题=Fw: Load on Rail Notice Ref-no: <<A1_DB5NBVLN.CNT>>, 发件人=vcfax . <vcfax@usprimeagency.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59345
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59345
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59345
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59344, 主题: Fw: OOCL Arrival Notice OOLU2307552650 | COSCO SHIPPING CAMELLIA - 027E
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59344, 主题=Fw: OOCL Arrival Notice OOLU2307552650 | COSCO SHIPPING CAMELLIA - 027E, 发件人=operator . <operator@amglbl.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59344
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59344
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59344
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59343, 主题: Fw: OOCL Arrival Notice OOLU2307553000 | COSCO SHIPPING CAMELLIA - 027E
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59343, 主题=Fw: OOCL Arrival Notice OOLU2307553000 | COSCO SHIPPING CAMELLIA - 027E, 发件人=operator . <operator@amglbl.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59343
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59343
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59343
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59342, 主题: Fw: OOCL Arrival Notice OOLU2157998350 | CSCL BOHAI SEA - 069E
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59342, 主题=Fw: OOCL Arrival Notice OOLU2157998350 | CSCL BOHAI SEA - 069E, 发件人=neway . <neway@800firms.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59342
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59342
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59342
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59341, 主题: Fw: OOCL Arrival Notice OOLU8811119260 | COSCO SHIPPING CAMELLIA - 027E
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59341, 主题=Fw: OOCL Arrival Notice OOLU8811119260 | COSCO SHIPPING CAMELLIA - 027E, 发件人=neway . <neway@800firms.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59341
2025/05/23 18:40:09 handlers.go:231: [邮件处理] 保存 1 个附件记录，邮件ID: 59341
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59341
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59340, 主题: Fw: 2157998350 VCS-HCK-069 E amend request
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59340, 主题=Fw: 2157998350 VCS-HCK-069 E amend request, 发件人=neway . <neway@800firms.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59340
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59340
2025/05/23 18:40:09 handlers.go:216: [邮件处理] 保存邮件内容，ID: 59339, 主题: Fw: IQAX eBL – eBL# OOLU2158550180 Transferred to you (DO NOT REPLY)
2025/05/23 18:40:09 prime_email_content.go:72: [邮件内容保存] 准备保存邮件内容: ID=59339, 主题=Fw: IQAX eBL – eBL# OOLU2158550180 Transferred to you (DO NOT REPLY), 发件人=neway . <neway@800firms.com>
2025/05/23 18:40:09 prime_email_content.go:88: [邮件内容保存] 成功保存邮件内容: ID=59339
2025/05/23 18:40:09 handlers.go:250: [邮件处理] 更新邮件状态为已处理，邮件ID: 59339
2025/05/23 18:40:09 handlers.go:274: [邮件处理] 成功提交事务，完成处理 10 封邮件
{"level":"INFO","timestamp":"2025-05-23 18:40:09.203","file":"middleware/logger.go:32","msg":"| 200 | 54.950149102s |             ::1 | GET | /api/v1/emails/content | PostmanRuntime-ApipostRuntime/1.1.0 |"}
